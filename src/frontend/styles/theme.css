/*
  Christmas Theme Tokens
  --------------------------------------------------
  This file defines design tokens using CSS custom properties.
  - Base tokens: global colors, surfaces, borders, states, typography, focus, radii, shadows
  - Component tokens: buttons, adminbar, modal/overlay (alias to base tokens only; no raw hex here)
  - Dark variant: override tokens under .theme-dark

  Accessibility:
  - Text on dark green/red uses #FAFAFA (token: --color-text-on-dark) to ensure >= 4.5:1 contrast
  - Text on light surfaces uses #111111 (token: --color-text)
  - Focus states use a gold outline for strong visibility
*/

/* --------------------------------------------------
   Base tokens (global)
   -------------------------------------------------- */
:root {
  /* Colors: Primary Christmas palette */
  --color-primary-green: #064420; /* dark Christmas green */
  --color-primary-red: #8b0000; /* deep red */
  --color-accent-gold: #ffd700; /* warm gold */
  --color-text-on-dark: #fafafa; /* snow white for text on dark */

  /* Support / UI neutrals */
  --color-green-hover: #0b6e4f; /* lighter pine for hover */
  --color-red-hover: #aa0c0c; /* red hover */
  --color-danger: #c62828; /* confirm/reset */
  --color-silver: #d9d9d9; /* subtle borders/placeholders */
  --color-text: #111111; /* base text on light */

  /* Surfaces */
  --surface-default: #ffffff; /* app background */
  --surface-alt: #f7f7f7; /* subtle panels */
  --surface-elevated: #ffffff; /* cards/modals, with shadow */

  /* Borders */
  --border-subtle: #e6e6e6; /* light separators */

  /* State / feedback colors */
  --state-success: #2e7d32;
  --state-warning: #c47f00; /* gold-tinted warning */
  --state-info: #1565c0;
  --state-danger: #c62828;

  /* Layout & text defaults derived from base */
  --bg: var(--surface-default);
  --text: var(--color-text);

  /* Focus styling */
  --focus-color: var(--color-accent-gold);
  --focus-ring: 0 0 0 3px var(--focus-color);

  /* Overlay scrim (base token for translucency) */
  --overlay-scrim: rgba(17, 17, 17, 0.45);

  /* Typography: families & weights */
  --font-family-ui:
    'Nunito Sans', ui-rounded, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto,
    Helvetica, Arial, 'Apple Color Emoji', 'Segoe UI Emoji';
  --font-family-display:
    'Fredoka', ui-rounded, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto,
    Helvetica, Arial;
  --font-weight-regular: 400;
  --font-weight-semibold: 600;
  --font-weight-bold: 700;

  /* Back-compat alias (to be removed later) */
  --font-sans: var(--font-family-ui);

  --font-mono:
    ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New',
    monospace;
  --line-height-base: 1.5;

  /* Responsive type scale (clamp for fluid sizing) */
  --fs-h1: clamp(32px, 6vw, 56px);
  --fs-h2: clamp(26px, 4.8vw, 40px);
  --fs-h3: clamp(22px, 3.6vw, 30px);
  --fs-h4: clamp(18px, 2.6vw, 22px);
  --fs-h5: clamp(16px, 2vw, 18px);
  --fs-h6: 14px;
  --fs-subtitle: 15px;
  --fs-body: 15px;
  --fs-small: 13px;
  --fs-overline: 11px;
  --fs-button: 14px;

  /* Radius (bonus) */
  --radius-sm: 6px;
  --radius-md: 10px;
  --radius-lg: 16px;

  /* Shadows (bonus) - soft, green-tinted for warmth */
  --shadow-sm: 0 1px 2px rgba(6, 68, 32, 0.08);
  --shadow-md: 0 4px 12px rgba(6, 68, 32, 0.12);
  --shadow-lg: 0 10px 30px rgba(6, 68, 32, 0.16);

  /* Chrome: Top bar */
  --topbar-bg: color-mix(in srgb, var(--color-primary-green) 88%, black);
  --topbar-text: var(--color-text-on-dark);
  --topbar-border: color-mix(in srgb, var(--color-primary-green) 75%, black);
  --topbar-height: 56px;

  /* Chrome: Header */
  --header-bg: color-mix(in srgb, var(--color-primary-green) 10%, white);
  --header-text: var(--text);
  --header-border: color-mix(in srgb, var(--color-primary-green) 40%, var(--border-subtle));
}

/* --------------------------------------------------
   Component tokens (aliases to base tokens)
   -------------------------------------------------- */
:root {
  /* Buttons: default (neutral), primary (red), success (green), danger (intense red) */
  /* Default button */
  --btn-bg: var(--surface-alt);
  --btn-text: var(--text);
  --btn-border: var(--border-subtle);
  --btn-hover-bg: #ffffff; /* using elevated white is acceptable via surface */
  --btn-disabled-bg: var(--surface-alt);
  --btn-disabled-text: color-mix(in srgb, var(--text) 45%, white);
  --btn-radius: var(--radius-md);
  --btn-shadow: var(--shadow-sm);
  --btn-focus-ring: var(--focus-ring);

  /* Primary (festive red) */
  --btn-primary-bg: var(--color-primary-red);
  --btn-primary-text: var(--color-text-on-dark);
  --btn-primary-border: color-mix(in srgb, var(--color-primary-red) 85%, black);
  --btn-primary-hover-bg: var(--color-red-hover);
  --btn-primary-shadow: var(--shadow-sm);

  /* Success (evergreen) */
  --btn-success-bg: var(--color-primary-green);
  --btn-success-text: var(--color-text-on-dark);
  --btn-success-border: color-mix(in srgb, var(--color-primary-green) 85%, black);
  --btn-success-hover-bg: var(--color-green-hover);
  --btn-success-shadow: var(--shadow-sm);

  /* Danger (intense red) */
  --btn-danger-bg: var(--state-danger);
  --btn-danger-text: var(--color-text-on-dark);
  --btn-danger-border: color-mix(in srgb, var(--state-danger) 85%, black);
  --btn-danger-hover-bg: var(--color-red-hover);
  --btn-danger-shadow: var(--shadow-sm);

  /* Adminbar: diagonal red/green stripes + gold top border */
  --adminbar-stripe-red: var(--color-primary-red);
  --adminbar-stripe-green: var(--color-primary-green);
  --adminbar-bg: repeating-linear-gradient(
    135deg,
    var(--adminbar-stripe-green) 0 16px,
    var(--adminbar-stripe-red) 16px 32px
  );
  --adminbar-text: var(--color-text-on-dark);
  --adminbar-top-border: 2px solid var(--color-accent-gold);

  /* Modal / Overlay */
  --modal-bg: var(--surface-elevated);
  --modal-text: var(--text);
  --modal-radius: var(--radius-lg);
  --modal-shadow: var(--shadow-lg);
  --overlay-bg: var(--overlay-scrim);

  /* Links and accents */
  --link-color: var(--color-primary-green);
  --link-hover-underline-color: var(--color-accent-gold); /* gold hover underline only */
}

/* --------------------------------------------------
   Player State tokens (can-open, lost, consolation, grand)
   These are consumed by components like PlayStateBanner and any state badges.
   Do not use raw hex; only derive from base tokens above.
   -------------------------------------------------- */
:root {
  /* Can open (positive, invitation) */
  --play-can-open-bg: color-mix(in srgb, var(--color-primary-green) 18%, transparent);
  --play-can-open-border: color-mix(in srgb, var(--color-primary-green) 55%, var(--border-subtle));
  --play-can-open-text: var(--text);
  --play-can-open-shadow: 0 0 0 0 transparent;

  /* Lost (neutral with slight red tint) */
  --play-lost-bg: color-mix(in srgb, var(--color-primary-red) 10%, transparent);
  --play-lost-border: color-mix(in srgb, var(--color-primary-red) 45%, var(--border-subtle));
  --play-lost-text: var(--text);
  --play-lost-shadow: 0 0 0 0 transparent;

  /* Consolation (green highlight) */
  --play-consolation-bg: color-mix(in srgb, var(--color-primary-green) 22%, transparent);
  --play-consolation-border: color-mix(
    in srgb,
    var(--color-primary-green) 60%,
    var(--border-subtle)
  );
  --play-consolation-text: var(--text);
  --play-consolation-shadow: 0 0 0 2px
    color-mix(in srgb, var(--color-primary-green) 25%, transparent);

  /* Grand (gold highlight) */
  --play-grand-bg: color-mix(in srgb, var(--color-accent-gold) 60%, white);
  --play-grand-border: color-mix(in srgb, var(--color-accent-gold) 75%, black);
  --play-grand-text: #111111; /* on gold, use dark text for contrast */
  --play-grand-shadow:
    inset 0 0 0 1px color-mix(in srgb, var(--color-accent-gold) 90%, black),
    0 6px 18px color-mix(in srgb, var(--color-accent-gold) 25%, transparent);
}

/* Optional utility classes for quick application (token consumers) */
.playstate {
  border-radius: var(--radius-md);
  border: 1px solid var(--border-subtle);
  box-shadow: var(--shadow-sm);
  color: var(--text);
  background: var(--surface-elevated);
}
.playstate--can-open {
  background: var(--play-can-open-bg);
  border-color: var(--play-can-open-border);
  color: var(--play-can-open-text);
  box-shadow: var(--play-can-open-shadow);
}
.playstate--lost {
  background: var(--play-lost-bg);
  border-color: var(--play-lost-border);
  color: var(--play-lost-text);
  box-shadow: var(--play-lost-shadow);
}
.playstate--consolation {
  background: var(--play-consolation-bg);
  border-color: var(--play-consolation-border);
  color: var(--play-consolation-text);
  box-shadow: var(--play-consolation-shadow);
}
.playstate--grand {
  background: var(--play-grand-bg);
  border-color: var(--play-grand-border);
  color: var(--play-grand-text);
  box-shadow: var(--play-grand-shadow);
}

/* --------------------------------------------------
   Dark variant overrides
   Usage: add class .theme-dark at a high level (e.g., on <html> or <body>)
   -------------------------------------------------- */
.theme-dark {
  /* Dark surfaces and text */
  --bg: #042d16; /* deep green background */
  --text: var(--color-text-on-dark);

  --surface-default: #0e1a14; /* darker panels */
  --surface-alt: #13261d; /* alt panel */
  --surface-elevated: #13261d; /* cards/modals */

  --border-subtle: #1e3a2d; /* subtle borders on dark */

  /* Keep gold as accent for contrast */
  --color-accent-gold: #ffd700;

  /* Hovers keep the same semantic intent */
  --color-green-hover: #0b6e4f;
  --color-red-hover: #aa0c0c;

  /* Shadows: slightly stronger spread but still soft */
  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.25);
  --shadow-md: 0 6px 16px rgba(0, 0, 0, 0.3);
  --shadow-lg: 0 12px 36px rgba(0, 0, 0, 0.38);

  /* Overlay appears a bit darker on dark theme for separation */
  --overlay-scrim: rgba(0, 0, 0, 0.55);

  /* Buttons on dark: defaults lean on surfaces/text above */
  --btn-bg: color-mix(in srgb, var(--surface-alt) 85%, black);
  --btn-text: var(--text);
  --btn-border: color-mix(in srgb, var(--border-subtle) 65%, black);
  --btn-hover-bg: color-mix(in srgb, var(--surface-elevated) 85%, black);
  --btn-disabled-bg: color-mix(in srgb, var(--surface-alt) 60%, black);
}

/* Player State tokens — dark overrides */
.theme-dark {
  --play-can-open-bg: color-mix(in srgb, var(--color-primary-green) 24%, transparent);
  --play-can-open-border: color-mix(in srgb, var(--color-primary-green) 65%, var(--border-subtle));
  --play-can-open-text: var(--text);

  --play-lost-bg: color-mix(in srgb, var(--color-primary-red) 16%, transparent);
  --play-lost-border: color-mix(in srgb, var(--color-primary-red) 55%, var(--border-subtle));
  --play-lost-text: var(--text);

  --play-consolation-bg: color-mix(in srgb, var(--color-primary-green) 28%, transparent);
  --play-consolation-border: color-mix(
    in srgb,
    var(--color-primary-green) 70%,
    var(--border-subtle)
  );
  --play-consolation-text: var(--text);

  --play-grand-bg: color-mix(in srgb, var(--color-accent-gold) 32%, transparent);
  --play-grand-border: color-mix(in srgb, var(--color-accent-gold) 85%, black);
  --play-grand-text: #111111;
}

/* Top bar — dark overrides */
.theme-dark {
  --topbar-bg: color-mix(in srgb, var(--color-primary-green) 82%, black);
  --topbar-text: var(--color-text-on-dark);
  --topbar-border: color-mix(in srgb, var(--color-primary-green) 70%, black);

  /* Header — dark overrides */
  --header-bg: color-mix(in srgb, var(--color-primary-green) 18%, transparent);
  --header-text: var(--text);
  --header-border: color-mix(in srgb, var(--color-primary-green) 60%, var(--border-subtle));
}

/* --------------------------------------------------
   Suggested generic usage helpers (non-invasive)
   Note: These are not required styles, just helpers aligning with tokens.
   -------------------------------------------------- */
:root,
.theme-dark {
  /* Generic application of background and text */
  color: var(--text);
  background-color: var(--bg);
}

*:focus-visible {
  outline: none;
  box-shadow: var(--focus-ring);
  border-radius: var(--radius-sm);
}

/* Accessibility validations (documentation notes):
   - Text on dark green/red uses --color-text-on-dark (#FAFAFA) for >= 4.5:1 contrast
   - Text on gold (–color-accent-gold) should use dark text (--color-text #111111)
   - Adminbar remains readable over content; buttons use strong contrast via tokens above
*/
